<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>From Audit to Dialogue: Research Evaluation&#39;s Radical Turn | Millephilosoph</title>
<meta name="keywords" content="">
<meta name="description" content="What do research crowdfunding, citizen science, and blockchain technologies have in common? They represent a fundamental shift away from centralized authority toward distributed decision-making. This same shift is now reaching the heart of academic governance: how we evaluate research.
I attended a symposium at Kyoto University on their new research evaluation framework, COMON. As an outsider—a researcher studying peer review systems—I witnessed something that goes far beyond the &ldquo;responsible metrics&rdquo; discourse of DORA or the collaborative spirit of CoARA. This is not another call for better measurement. It is a restructuring of institutional relationships, built on recognition that universities must help research communities create entirely new resources rather than compete for a fixed pie.">
<meta name="author" content="">
<link rel="canonical" href="https://millephilosoph.xyz/posts/research_evaluation_reform/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.9f4f930ec0a36b871d43ac0fcff0bb459b14c6b7b099ecbc546358efdda919f3.css" integrity="sha256-n0&#43;TDsCja4cdQ6wPz/C7RZsUxrewmey8VGNY792pGfM=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://millephilosoph.xyz/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://millephilosoph.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://millephilosoph.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://millephilosoph.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://millephilosoph.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://millephilosoph.xyz/posts/research_evaluation_reform/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XG7LSRYRD8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XG7LSRYRD8', {
    anonymize_ip: true,
    page_path: '\/posts\/research_evaluation_reform\/'
  });
</script>
<meta property="og:url" content="https://millephilosoph.xyz/posts/research_evaluation_reform/">
  <meta property="og:site_name" content="Millephilosoph">
  <meta property="og:title" content="From Audit to Dialogue: Research Evaluation&#39;s Radical Turn">
  <meta property="og:description" content="What do research crowdfunding, citizen science, and blockchain technologies have in common? They represent a fundamental shift away from centralized authority toward distributed decision-making. This same shift is now reaching the heart of academic governance: how we evaluate research.
I attended a symposium at Kyoto University on their new research evaluation framework, COMON. As an outsider—a researcher studying peer review systems—I witnessed something that goes far beyond the “responsible metrics” discourse of DORA or the collaborative spirit of CoARA. This is not another call for better measurement. It is a restructuring of institutional relationships, built on recognition that universities must help research communities create entirely new resources rather than compete for a fixed pie.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-10-12T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-10-12T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="From Audit to Dialogue: Research Evaluation&#39;s Radical Turn">
<meta name="twitter:description" content="What do research crowdfunding, citizen science, and blockchain technologies have in common? They represent a fundamental shift away from centralized authority toward distributed decision-making. This same shift is now reaching the heart of academic governance: how we evaluate research.
I attended a symposium at Kyoto University on their new research evaluation framework, COMON. As an outsider—a researcher studying peer review systems—I witnessed something that goes far beyond the &ldquo;responsible metrics&rdquo; discourse of DORA or the collaborative spirit of CoARA. This is not another call for better measurement. It is a restructuring of institutional relationships, built on recognition that universities must help research communities create entirely new resources rather than compete for a fixed pie.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://millephilosoph.xyz/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "From Audit to Dialogue: Research Evaluation's Radical Turn",
      "item": "https://millephilosoph.xyz/posts/research_evaluation_reform/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "From Audit to Dialogue: Research Evaluation's Radical Turn",
  "name": "From Audit to Dialogue: Research Evaluation\u0027s Radical Turn",
  "description": "What do research crowdfunding, citizen science, and blockchain technologies have in common? They represent a fundamental shift away from centralized authority toward distributed decision-making. This same shift is now reaching the heart of academic governance: how we evaluate research.\nI attended a symposium at Kyoto University on their new research evaluation framework, COMON. As an outsider—a researcher studying peer review systems—I witnessed something that goes far beyond the \u0026ldquo;responsible metrics\u0026rdquo; discourse of DORA or the collaborative spirit of CoARA. This is not another call for better measurement. It is a restructuring of institutional relationships, built on recognition that universities must help research communities create entirely new resources rather than compete for a fixed pie.\n",
  "keywords": [
    
  ],
  "articleBody": "What do research crowdfunding, citizen science, and blockchain technologies have in common? They represent a fundamental shift away from centralized authority toward distributed decision-making. This same shift is now reaching the heart of academic governance: how we evaluate research.\nI attended a symposium at Kyoto University on their new research evaluation framework, COMON. As an outsider—a researcher studying peer review systems—I witnessed something that goes far beyond the “responsible metrics” discourse of DORA or the collaborative spirit of CoARA. This is not another call for better measurement. It is a restructuring of institutional relationships, built on recognition that universities must help research communities create entirely new resources rather than compete for a fixed pie.\nFrom Discovery to Audit: The First Transformation Scattered comparisons of publication counts began around 1910 [Narin, 1976], crystallizing into scientometrics as a formal discipline by the 1960s. Before the 1980s, evaluation served a clear purpose: discovering excellent work and maintaining scholarly quality. Peer review served as a self-regulatory mechanism. Evaluation occurred within disciplines, from an academic perspective, by those who understood the work.\nThe 1980s brought the first turning point. Research activity expanded dramatically while public funding growth slowed amid economic recession. The 1990s introduced New Public Management principles into research governance [Georghiou \u0026 Rossner, 2000; Irvine \u0026 Martin, 1984]. Evaluation pivoted from discovery to accountability. Taxpayers demanded explanations. Policymakers demanded metrics. The question changed from “How do we find great research?” to “How do we prove we’re spending wisely?”\nThe consequences are now visible globally. The Trump administration’s assault on university autonomy starkly revealed this audit paradigm’s vulnerabilities. In Japan, incorporating national universities as independent administrative agencies appeared to reduce government intervention, which turned out that universities remained dependent on block grants while reporting burdens exploded. In the EU, Horizon Europe struggles to balance excellence metrics with geographic and institutional diversity—revealing tensions between accountability demands and research reality. China’s centralized S\u0026T planning faces growing recognition that top-down control stifles the innovation it seeks to foster. Autonomy in name; surveillance in practice.\nLong Struggle: Fleeing the Metrics Tsunami The 2010s brought growing recognition of these limitations. DORA (the San Francisco Declaration on Research Assessment) emerged as a response to metric abuse—but remained firmly within the accountability framework. It called for responsible metrics, not rejection of the audit paradigm itself. This is crucial: responsible metrics represent the second stage’s attempt at self-correction, not transcendence.\nMultiple forces converged to make this insufficient. Change accelerated. Uncertainty rose. Multi-year review cycles like the UK’s Research Excellence Framework struggled to keep pace. Top-down national research strategies faced recognized limitations in unpredictable environments.\nInterdisciplinarity complicated matters further. When projects span multiple fields, no single researcher can comparatively evaluate them. Who judges collaborations among climate scientists, AI researchers, and political economists against traditional disciplinary standards? UNESCO’s Open Science declaration acknowledged this: different fields produce different outputs. Publications dominate some disciplines. Others value practical software, conference presentations, or scholarly monographs. Imposing a single evaluation axis invites dysfunction.\nYet universities faced a paradox. Without common metrics, how can they allocate block funding across faculties? This tension drove CoARA’s (Coalition for Advancing Research Assessment) emergence as a bridge. While rooted in concerns about metric diversity, it gestured toward something more fundamental: recognition that research outcomes are inherently diverse and should be celebrated as such. CoARA’s collaborative exploration, involving numerous universities, has been developing new evaluation paradigms. But it remained largely within existing accountability structures.\nFrom Audit to Dialogue: COMON’s Radical Vision COMON represents these efforts crystallizing into something genuinely different. Kyoto University’s framework refuses to use evaluation results for funding allocation—a deliberate break from the accountability paradigm that defines Stage 2. Instead, it shifts institutional relationships from control to capacity-building.\nOne researcher from Kyoto University explained COMON through the Paris Agreement framework. The climate accord emerged from lessons learned: the Kyoto Protocol’s failure came from imposing uniform targets on nations with vastly different circumstances, producing resentment and resistance. The Paris Agreement enables voluntary participation. Each nation sets its own commitments while contributing to a collective goal. Unity through diversity, coordination without coercion.\nCOMON adopts this structure, but goes further. It defines quality research through five dimensions including diversity and research not yet visible. Crucially, COMON explicitly prohibits using these evaluations for funding allocation. Indicators inevitably produce gaming when tied to resources.\nBut the deeper transformation lies in institutional relationships. The university’s role shifts from allocation and audit to capacity-building. It provides minimum funding and focuses on helping each faculty and research project attract resources independently—through grants, industry partnerships, even crowdfunding. This support extends beyond money to researcher development, academic society formation, and communications capacity.\nHere is what makes this radical: the goal is not optimizing distribution of a fixed resource pool. In an era of increasing complexity and diversity, the aim is transforming each organizational unit—each faculty, each project—into an entity capable of creating new resources rather than competing for limited existing ones. This requires each unit to reflect on where they currently stand and build evaluation frameworks suited to their specific contexts. The university enables this self-directed development through resources like University Research Administrators (URAs).\nThis is what “dialogue” means in COMON’s vision. It is not simply about emphasizing qualitative assessment over quantitative metrics for individual projects. It is about fostering disciplinary consensus and a sense of belonging—something that cannot emerge from centralized metrics. When faculties and projects collaboratively determine what they need to do, how they define success, and how they will build capacity, they reconstruct the shared purpose that audit culture eroded. This path forward is uncertain and will likely be difficult for all involved. But unlike superficial reforms, it addresses the root cause.\nThis is not a rosy vision of smooth transition. What Kyoto University proposes is difficult, uncertain work. It means faculties and projects must develop new capabilities. It means researchers must think differently about how they build support and demonstrate value. It means universities must radically reconceive their role from gatekeepers to enablers.\nThis matters because research evaluation shapes research itself. When competition for fixed resources dominates, collaboration suffers.\nCOMON asks whether research communities can define and pursue excellence when given tools, resources, and freedom rather than surveillance. Whether universities can shift from controlling to enabling. Whether decentralized evaluation can maintain quality and accountability. These questions have no guaranteed answers. Some faculties and projects will struggle or fail. Universities will face pressure to reassert central control when outcomes seem unclear.\nThis is not a quiet paradigm shift. It is a loud one—if you know what to listen for.\n",
  "wordCount" : "1088",
  "inLanguage": "en",
  "datePublished": "2025-10-12T00:00:00Z",
  "dateModified": "2025-10-12T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://millephilosoph.xyz/posts/research_evaluation_reform/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Millephilosoph",
    "logo": {
      "@type": "ImageObject",
      "url": "https://millephilosoph.xyz/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://millephilosoph.xyz/" accesskey="h" title="Millephilosoph (Alt + H)">Millephilosoph</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://millephilosoph.xyz/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://millephilosoph.xyz/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://millephilosoph.xyz/cv/" title="CV">
                    <span>CV</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      From Audit to Dialogue: Research Evaluation&#39;s Radical Turn
    </h1>
    <div class="post-meta"><span title='2025-10-12 00:00:00 +0000 UTC'>October 12, 2025</span>

</div>
  </header> 
  <div class="post-content"><p>What do research crowdfunding, citizen science, and blockchain technologies have in common? They represent a fundamental shift away from centralized authority toward distributed decision-making. This same shift is now reaching the heart of academic governance: how we evaluate research.</p>
<p>I attended a symposium at Kyoto University on their new research evaluation framework, COMON. As an outsider—a researcher studying peer review systems—I witnessed something that goes far beyond the &ldquo;responsible metrics&rdquo; discourse of DORA or the collaborative spirit of CoARA. This is not another call for better measurement. It is a restructuring of institutional relationships, built on recognition that universities must help research communities create entirely new resources rather than compete for a fixed pie.</p>
<h2 id="from-discovery-to-audit-the-first-transformation">From Discovery to Audit: The First Transformation<a hidden class="anchor" aria-hidden="true" href="#from-discovery-to-audit-the-first-transformation">#</a></h2>
<p>Scattered comparisons of publication counts began around 1910 [Narin, 1976], crystallizing into scientometrics as a formal discipline by the 1960s. Before the 1980s, evaluation served a clear purpose: discovering excellent work and maintaining scholarly quality. Peer review served as a self-regulatory mechanism. Evaluation occurred within disciplines, from an academic perspective, by those who understood the work.</p>
<p>The 1980s brought the first turning point. Research activity expanded dramatically while public funding growth slowed amid economic recession. The 1990s introduced New Public Management principles into research governance [Georghiou &amp; Rossner, 2000; Irvine &amp; Martin, 1984]. Evaluation pivoted from discovery to accountability. Taxpayers demanded explanations. Policymakers demanded metrics. The question changed from &ldquo;How do we find great research?&rdquo; to &ldquo;How do we prove we&rsquo;re spending wisely?&rdquo;</p>
<p>The consequences are now visible globally. The Trump administration&rsquo;s assault on university autonomy starkly revealed this audit paradigm&rsquo;s vulnerabilities. In Japan, incorporating national universities as independent administrative agencies appeared to reduce government intervention, which turned out that universities remained dependent on block grants while reporting burdens exploded. In the EU, Horizon Europe struggles to balance excellence metrics with geographic and institutional diversity—revealing tensions between accountability demands and research reality. China&rsquo;s centralized S&amp;T planning faces growing recognition that top-down control stifles the innovation it seeks to foster. Autonomy in name; surveillance in practice.</p>
<h2 id="long-struggle-fleeing-the-metrics-tsunami">Long Struggle: Fleeing the Metrics Tsunami<a hidden class="anchor" aria-hidden="true" href="#long-struggle-fleeing-the-metrics-tsunami">#</a></h2>
<p>The 2010s brought growing recognition of these limitations. DORA (the San Francisco Declaration on Research Assessment) emerged as a response to metric abuse—but remained firmly within the accountability framework. It called for responsible metrics, not rejection of the audit paradigm itself. This is crucial: responsible metrics represent the second stage&rsquo;s attempt at self-correction, not transcendence.</p>
<p>Multiple forces converged to make this insufficient. Change accelerated. Uncertainty rose. Multi-year review cycles like the UK&rsquo;s Research Excellence Framework struggled to keep pace. Top-down national research strategies faced recognized limitations in unpredictable environments.</p>
<p>Interdisciplinarity complicated matters further. When projects span multiple fields, no single researcher can comparatively evaluate them. Who judges collaborations among climate scientists, AI researchers, and political economists against traditional disciplinary standards? UNESCO&rsquo;s Open Science declaration acknowledged this: different fields produce different outputs. Publications dominate some disciplines. Others value practical software, conference presentations, or scholarly monographs. Imposing a single evaluation axis invites dysfunction.</p>
<p>Yet universities faced a paradox. Without common metrics, how can they allocate block funding across faculties? This tension drove CoARA&rsquo;s (Coalition for Advancing Research Assessment) emergence as a bridge. While rooted in concerns about metric diversity, it gestured toward something more fundamental: recognition that research outcomes are inherently diverse and should be celebrated as such. CoARA&rsquo;s collaborative exploration, involving numerous universities, has been developing new evaluation paradigms. But it remained largely within existing accountability structures.</p>
<h2 id="from-audit-to-dialogue-comons-radical-vision">From Audit to Dialogue: COMON&rsquo;s Radical Vision<a hidden class="anchor" aria-hidden="true" href="#from-audit-to-dialogue-comons-radical-vision">#</a></h2>
<p>COMON represents these efforts crystallizing into something genuinely different. Kyoto University&rsquo;s framework refuses to use evaluation results for funding allocation—a deliberate break from the accountability paradigm that defines Stage 2. Instead, it shifts institutional relationships from control to capacity-building.</p>
<p>One researcher from Kyoto University explained COMON through the Paris Agreement framework. The climate accord emerged from lessons learned: the Kyoto Protocol&rsquo;s failure came from imposing uniform targets on nations with vastly different circumstances, producing resentment and resistance. The Paris Agreement enables voluntary participation. Each nation sets its own commitments while contributing to a collective goal. Unity through diversity, coordination without coercion.</p>
<p>COMON adopts this structure, but goes further. It defines quality research through five dimensions including diversity and research not yet visible. Crucially, COMON explicitly prohibits using these evaluations for funding allocation. Indicators inevitably produce gaming when tied to resources.</p>
<p>But the deeper transformation lies in institutional relationships. The university&rsquo;s role shifts from allocation and audit to capacity-building. It provides minimum funding and focuses on helping each faculty and research project attract resources independently—through grants, industry partnerships, even crowdfunding. This support extends beyond money to researcher development, academic society formation, and communications capacity.</p>
<p>Here is what makes this radical: the goal is not optimizing distribution of a fixed resource pool. In an era of increasing complexity and diversity, the aim is transforming each organizational unit—each faculty, each project—into an entity capable of creating new resources rather than competing for limited existing ones. This requires each unit to reflect on where they currently stand and build evaluation frameworks suited to their specific contexts. The university enables this self-directed development through resources like University Research Administrators (URAs).</p>
<p>This is what &ldquo;dialogue&rdquo; means in COMON&rsquo;s vision. It is not simply about emphasizing qualitative assessment over quantitative metrics for individual projects. It is about fostering disciplinary consensus and a sense of belonging—something that cannot emerge from centralized metrics. When faculties and projects collaboratively determine what they need to do, how they define success, and how they will build capacity, they reconstruct the shared purpose that audit culture eroded. This path forward is uncertain and will likely be difficult for all involved. But unlike superficial reforms, it addresses the root cause.</p>
<p>This is not a rosy vision of smooth transition. What Kyoto University proposes is difficult, uncertain work. It means faculties and projects must develop new capabilities. It means researchers must think differently about how they build support and demonstrate value. It means universities must radically reconceive their role from gatekeepers to enablers.</p>
<p>This matters because research evaluation shapes research itself. When competition for fixed resources dominates, collaboration suffers.</p>
<p>COMON asks whether research communities can define and pursue excellence when given tools, resources, and freedom rather than surveillance. Whether universities can shift from controlling to enabling. Whether decentralized evaluation can maintain quality and accountability. These questions have no guaranteed answers. Some faculties and projects will struggle or fail. Universities will face pressure to reassert central control when outcomes seem unclear.</p>
<p>This is not a quiet paradigm shift. It is a loud one—if you know what to listen for.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://millephilosoph.xyz/">Millephilosoph</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script>
  (function () {
    const header = document.querySelector('.header');
    if (!header) {
      return;
    }

    const toggleScrolledState = () => {
      const scrolled = window.scrollY > 16;
      header.classList.toggle('header--scrolled', scrolled);
    };

    toggleScrolledState();
    window.addEventListener('scroll', toggleScrolledState, { passive: true });
  })();
</script>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
